var path = require('path');
var cp = require('child_process');

function getMonitor(){
    
    var devs = [];
    try{
        var exePath = path.join(__dirname, 'build/Release/display-info.exe');
        var outBuf = cp.execFileSync(exePath, []);
        var outStr = String(outBuf, 'utf8');
        var devs = JSON.parse(outStr);
    }
    catch(e){

    }
    finally{
        return devs;
    }
}
function getDisplayDevice() {
    var mons = [];
    try{
        var exePath = path.join(__dirname, 'build/Release/display-info.exe');
        var outBuf = cp.execFileSync(exePath, ['mons']);
        var outStr = String(outBuf, 'utf8');
        var mons = JSON.parse(outStr);
    }
    catch(e){

    }
    finally{
        return mons;
    }
}

if (process.platform === 'win32'){
    module.exports = {
        getDisplayDevice: getDisplayDevice,
        getMonitor: getMonitor
    };
}
else {
    module.exports = {
        getDisplayDevice: function () { return []; },
        getMonitor: function () { return []; }
    };
}


